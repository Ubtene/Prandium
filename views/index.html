<!DOCTYPE html>
<html>

<head>
    <title>Prandium</title>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
</head>

<body>
    <h1> Please fill out this form to begin using Prandium </h1>
    <form>
        <input type=text name="email"></input>
        <input type="text" name="generalRestrictions"></input>
        <input type="text" name="particularRestrictions"></input>
        <div id="checks"> 
        <input type="checkbox"  name="monday"> Monday </input>
        <input type="checkbox" name="tuesday"> Tuesday </input>
        <input type="checkbox" name="wednesday"> Wednesday </input>
        <input type="checkbox" name="thursday"> Thursday </input>
        <input type="checkbox" name="friday">Friday </input>
        </div>
        <input type="checkbox" name="particularRestrictions"></input>
        <input type="hidden" name="user" value="">
        <button id="button">Go</button>
    </form>

</body>

<script type="text/javascript">

$(document).ready( function () {


$.ajax({

    type: "GET",
    url: "/api/user",
    success: function(data) {

        var user = data;
        $("[name=user]").val(user);

    },


});


$("#button").on("click", function() {


        //  var geocoder = new google.maps.Geocoder;

        //         if (navigator.geolocation) {
        //             navigator.geolocation.getCurrentPosition(function (position) {
        //                 var pos = {
        //                     lat: position.coords.latitude,
        //                     lng: position.coords.longitude
        //                 };
        //                 geocoder.geocode({
        //                     'location': pos
        //                 }, function (results, status) {
        //                             console.log(results);

        //                             var geo =  $("<div>");
                                    
        //                             geo.addClass('geobutton');

        //                             geo.html(results[7].formatted_address);

        //                             $('#passport-div').append(geo);
        //                 });
        //             });
        //         };

      var  daysArray = [];


        $("#checks :checked").each(function () {

            daysArray.push($(this).val());

        });

        var user = $("[name=user]").val();

        var preferences = $("[name=generalRestrictions]").val();

        var restrictions = $("[name=particularRestrictions]").val();
       var email = $("[name=email").val();

        var obj = {

            user: user,
            preferences: preferences,
            restrictions: restrictions,
            email: email,
            days: daysArray

        }

        $("[name=user").val("");
        $("[name=user").val("");
        $("[name=user").val("");

        $.ajax({

            type: "POST",
            data: obj,
            url: "/api/userdatabase"

        });  


              $.ajax({

                type: "Post",
                url: "/api/mealplan",
                success: function(data) {


                    var mealArray = data;

                 mealArray.map(function () {

                  



                 });


           });


});

});


</script>

</html>
